# Shadowrocket: 2026-01-05 13:46:19 (Optimized Version - Removed Script & Modules; Simplified Google Rewrites; Kept GlobalMedia to Hong Kong)
[General]
# ======= é€šç”¨ ======= #
bypass-system = true
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local,
ipv6 = false  # ä¿æŒç¦ç”¨ï¼Œé™¤éèŠ‚ç‚¹æ”¯æŒIPv6

# DNS é˜²æ±¡æŸ“ (ç²¾ç®€fallbackï¼Œä¼˜å…ˆDoH/TLS)
dns-server = system, https://dns.google/dns-query, https://cloudflare-dns.com/dns-query, tls://1.1.1.1:853
doh-server = https://dns.google/dns-query, https://cloudflare-dns.com/dns-query
doh-server-fallback = 223.5.5.5  # ç²¾ç®€ä¸ºä¸€ä¸ªå¯é fallback

# å®Œæ•´æœ¬åœ°/å±€åŸŸç½‘/å›½å†…ä¾‹å¤–è·¯ç”± (æ·»åŠ ç»„æ’­èŒƒå›´ä»¥æ”¯æŒçƒ­ç‚¹)
tun-excluded-routes = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 224.0.0.0/4, localhost, *.local,

[Proxy Group]
å…¨çƒåŠ é€Ÿ = select,è‡ªåŠ¨é€‰æ‹©,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,ç‹®åŸèŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,policy-select-name=é¦™æ¸¯èŠ‚ç‚¹
è‹¹æœæœåŠ¡ = select,DIRECT,è‡ªåŠ¨é€‰æ‹©,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,ç‹®åŸèŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,policy-select-name=DIRECT
å“”å“©å“”å“© = select,DIRECT,è‡ªåŠ¨é€‰æ‹©,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,ç‹®åŸèŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,policy-select-name=DIRECT
å…œåº•åˆ†æµ = select,DIRECT,è‡ªåŠ¨é€‰æ‹©,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,ç‹®åŸèŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,REJECT,policy-select-name=é¦™æ¸¯èŠ‚ç‚¹  # æ·»åŠ REJECTä½œä¸ºfallback
è‡ªåŠ¨é€‰æ‹© = url-test,policy-select-name=ğŸ‡­ğŸ‡° é¦™æ¸¯ 14,interval=300,timeout=5,tolerance=50,url=http://www.gstatic.com/generate_204,policy-regex-filter=.  # é™ä½intervalï¼Œæå‡å“åº”ï¼›æ·»åŠ tolerance
é¦™æ¸¯èŠ‚ç‚¹ = url-test,policy-select-name=ğŸ‡­ğŸ‡° é¦™æ¸¯ 06,interval=600,tolerance=50,timeout=5,url=http://www.gstatic.com/generate_204,policy-regex-filter=é¦™æ¸¯|æ¸¯|HK|ğŸ‡­ğŸ‡°|(?i)Hong  # ç®€åŒ–regexï¼ˆå¦‚æœ‰éœ€è¦è¿›ä¸€æ­¥æµ‹è¯•ï¼‰
å°æ¹¾èŠ‚ç‚¹ = url-test,policy-select-name=ğŸ‡¼ğŸ‡¸ å°æ¹¾ 03,interval=600,tolerance=50,timeout=5,url=http://www.gstatic.com/generate_204,policy-regex-filter=å°|TW|(?i)Taiwan  # ç®€åŒ–regexï¼Œç§»é™¤è´Ÿé¢åŒ¹é…ä»¥æå‡é€Ÿåº¦
éŸ©å›½èŠ‚ç‚¹ = url-test,policy-select-name=ğŸ‡°ğŸ‡· éŸ©å›½ 14,interval=600,tolerance=50,timeout=5,url=http://www.gstatic.com/generate_204,policy-regex-filter=KR|Korea|korea|KOR|éŸ©å›½|é¦–å°”|éŸ©|éŸ“|æ˜¥å·|ğŸ‡°ğŸ‡·
æ—¥æœ¬èŠ‚ç‚¹ = url-test,policy-select-name=ğŸ‡¯ğŸ‡µ æ—¥æœ¬ 09,interval=600,tolerance=50,timeout=5,url=http://www.gstatic.com/generate_204,policy-regex-filter=æ—¥|JP|(?i)Japan  # ç®€åŒ–regex
ç‹®åŸèŠ‚ç‚¹ = url-test,policy-select-name=ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ 02,interval=600,tolerance=50,timeout=5,url=http://www.gstatic.com/generate_204,policy-regex-filter=æ–°|ç‹®|ç…|SG|(?i)Singapore  # ç®€åŒ–regex
ç¾å›½èŠ‚ç‚¹ = url-test,policy-select-name=ğŸ‡ºğŸ‡¸ ç¾å›½ 13,interval=600,tolerance=50,timeout=5,url=http://www.gstatic.com/generate_204,policy-regex-filter=ç¾|US|(?i)States|American  # ç®€åŒ–regex

[Rule]
# é«˜é¢‘è§„åˆ™å‰ç½®ä»¥åŠ é€ŸåŒ¹é…
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/WeChat/WeChat.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Apple/Apple.list,è‹¹æœæœåŠ¡
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/BiliBili/BiliBili.list,å“”å“©å“”å“©
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/ChinaMedia/ChinaMedia.list,DIRECT

OR,((DOMAIN-KEYWORD,wogg),(DOMAIN-SUFFIX,iios.club),(DOMAIN-SUFFIX,shuibeng.dpdns.org)),DIRECT
OR,((DOMAIN-SUFFIX,vercel.app),(DOMAIN-KEYWORD,haijiao)),é¦™æ¸¯èŠ‚ç‚¹

# AIè§„åˆ™æ·»åŠ fallbackï¼ˆç¾å›½èŠ‚ç‚¹ä¼˜å…ˆï¼Œä½†fallbackåˆ°ç‹®åŸï¼Œé¿å…é¦™æ¸¯ï¼‰
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Gemini/Gemini.list,ç¾å›½èŠ‚ç‚¹,ç‹®åŸèŠ‚ç‚¹
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/OpenAI/OpenAI.list,ç¾å›½èŠ‚ç‚¹,ç‹®åŸèŠ‚ç‚¹
RULE-SET,https://raw.githubusercontent.com/iab0x00/ProxyRules/main/Rule/AI.txt,ç¾å›½èŠ‚ç‚¹,ç‹®åŸèŠ‚ç‚¹

RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/GitHub/GitHub.list,é¦™æ¸¯èŠ‚ç‚¹
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Facebook/Facebook.list,éŸ©å›½èŠ‚ç‚¹,ç‹®åŸèŠ‚ç‚¹  # æ·»åŠ fallbackä»¥é˜²éŸ©å›½æ‹¥å µ
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Google/Google.list,ç¾å›½èŠ‚ç‚¹
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Instagram/Instagram.list,éŸ©å›½èŠ‚ç‚¹,ç‹®åŸèŠ‚ç‚¹  # æ·»åŠ fallback
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Spotify/Spotify.list,é¦™æ¸¯èŠ‚ç‚¹,ç‹®åŸèŠ‚ç‚¹  # é¦™æ¸¯ä¼˜å…ˆï¼Œfallbackåˆ°ç‹®åŸ
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/YouTube/YouTube.list,ç¾å›½èŠ‚ç‚¹
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Whatsapp/Whatsapp.list,éŸ©å›½èŠ‚ç‚¹,ç‹®åŸèŠ‚ç‚¹  # æ·»åŠ fallback
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Twitter/Twitter.list,ç¾å›½èŠ‚ç‚¹
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Threads/Threads.list,éŸ©å›½èŠ‚ç‚¹,ç‹®åŸèŠ‚ç‚¹  # æ·»åŠ fallback
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Telegram/Telegram.list,ç‹®åŸèŠ‚ç‚¹
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/TikTok/TikTok.list,æ—¥æœ¬èŠ‚ç‚¹

# åˆå¹¶GlobalMediaè§„åˆ™ä»¥å‡å°‘æ•°é‡ï¼Œç›´æ¥èµ°é¦™æ¸¯èŠ‚ç‚¹ï¼ˆä¸æ·»åŠ è§„åˆ™ä¼šèµ°FINALï¼Œä½†ä¿æŒè§„åˆ™æ›´ç²¾ç¡®æ§åˆ¶ï¼‰
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/GlobalMedia/GlobalMedia.list,é¦™æ¸¯èŠ‚ç‚¹
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/GlobalMedia/GlobalMedia_Domain.list,é¦™æ¸¯èŠ‚ç‚¹
RULE-SET,https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Shadowrocket/Ruleset/Global.list,é¦™æ¸¯èŠ‚ç‚¹  # è‹¥ä¸GlobalMediaé‡å ï¼Œå¯æµ‹è¯•åç§»é™¤

RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Lan/Lan.list,DIRECT
GEOIP,CN,DIRECT
FINAL,å…œåº•åˆ†æµ

[Host]
*.testflight.apple.com = server:8.8.4.4  # æ‰©å±•åˆ°é€šé…ç¬¦ï¼Œè¦†ç›–æ›´å¤šAppleåŸŸå
*.aaplimg.com = server:https://dns.google/dns-query  # ç¤ºä¾‹æ‰©å±•ï¼Œç”¨DoHæ›¿æ¢ä»¥åŠ å¯†

[URL Rewrite]
# è°·æ­Œæœç´¢å¼ºåˆ¶å›½é™…ç‰ˆ
^http://www.google.cn https://www.google.com 302
^https://www.google.cn https://www.google.com 302
^http://google.cn https://www.google.com 302
^https://google.cn https://www.google.com 302

# ç™¾åº¦æœç´¢é˜²åŠ«æŒï¼ˆå¯é€‰ï¼Œé˜²æ­¢ç™¾åº¦å¼ºåˆ¶ HTTPS æˆ–å¹¿å‘Šï¼‰
^http://www.baidu.com https://www.baidu.com 302

# å¼ºåˆ¶æŸäº›æœåŠ¡èµ° HTTPSï¼ˆæå‡å®‰å…¨ï¼‰
^http://([^\s]+)$ https://$1 302

[MITM]
hostname = 
   *.google.com, *.googleapis.com, *.gstatic.com, *.googleusercontent.com,  # è°·æ­Œå…¨å®¶æ¡¶
  *.youtube.com, *.ytimg.com, *.youtu.be, *.ggpht.com,  # YouTube
  *.openai.com, *.chatgpt.com, *.oaiusercontent.com,  # ChatGPT/OpenAI
  *.instagram.com, *.cdninstagram.com, *.threads.net,  # Instagram/Threads
  *.facebook.com, *.fbcdn.net, *.meta.com,  # Facebook/Meta
  *.tiktok.com, *.tiktokcdn.com, *.byteoversea.com,  # TikTok
  *.telegram.org, *.t.me, *.tdesktop.com,  # Telegram
  *.netflix.com, *.nflximg.net, *.nflxvideo.net,  # Netflixï¼ˆè§£é”åœ°åŒºå†…å®¹ï¼‰
  *.disneyplus.com, *.bamgrid.com,  # Disney+
  *.spotify.com, *.scdn.co  # Spotify
ca-passphrase = 
ca-p12 = 
enable = true
